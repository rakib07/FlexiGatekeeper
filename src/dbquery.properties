db.query.create-user = INSERT INTO `users` (`user_id`, `reference_username`, `reference_password`, `created_on`, `modified_on`) VALUES (:user_id, :reference_username, :reference_password, :created_on, :modified_on);
db.query.create-subscriber = INSERT INTO `subscribers` (`user_id`, `registration_date`, `expired_date`, `max_members`, `ip_address`) VALUES (:user_id, :registration_date, :expired_date, :max_members, :ip_address);
db.query.add-subscriber-member = INSERT INTO `subscribers_members` (`subscriber_user_id`, `member_user_id`) VALUES (:subscriber_user_id, :member_user_id);
db.query.add-subscriber-service = INSERT INTO `subscribers_services` (`subscriber_user_id`, `service_id`, `api_key`, `registration_date`, `expired_date`) VALUES (:subscriber_user_id, :service_id, :api_key, :registration_date, :expired_date);
db.query.add-callback-function = INSERT INTO `callback_functions` (`api_key`, `callback_function`) VALUES (:api_key, :callback_function);
db.query.get-subscriber-info = SELECT subscribers.*, count(member_user_id) as current_members from subscribers join subscribers_members on subscribers.user_id = subscribers_members.subscriber_user_id where ip_address = :ip_address;
db.query.get-user-subscriber-service-info = SELECT subscribers_members.*, subscribers.expired_date as subscription_expired_date, subscribers_services.expired_date as api_expired_date from users join subscribers_members on users.user_id = subscribers_members.member_user_id join subscribers on subscribers_members.subscriber_user_id = subscribers.user_id join subscribers_services on subscribers_services.subscriber_user_id = subscribers.user_id where reference_username = :reference_username and reference_password = :reference_password and ip_address = :ip_address and api_key = :api_key;
db.query.create-transaction = INSERT INTO `transactions` (`transaction_id`, `api_key`, `balance_in`, `balance_out`, `status_id`, `type_id`, `created_on`, `modified_on`) VALUES (:transaction_id, :api_key, :balance_in, :balance_out, :status_id, :type_id, :created_on, :modified_on);

db.query.add-service = INSERT INTO `services` (`id`, `title`) VALUES (:id, :title);
